<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criador de Fluxos - E.I.O</title>
    <link rel="stylesheet" href="design-system.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="flow-builder.css">
</head>

<body class="eio-dashboard-body">
    <!-- Sidebar -->
    <aside class="eio-sidebar" style="width: 280px;">
        <div class="eio-sidebar-header">
            <img src="public/assets/official_brand_rocket.png" alt="E.I.O" class="eio-sidebar-logo">
            <div class="eio-sidebar-title">
                <span class="eio-title-main">E.I.O</span>
                <span class="eio-title-sub">Flow Builder</span>
            </div>
        </div>

        <!-- Blocks Palette -->
        <div class="eio-blocks-palette">
            <div class="eio-palette-header">
                <h4>Blocos Disponíveis</h4>
            </div>

            <div class="eio-palette-section">
                <div class="eio-palette-title">Extração de Dados</div>
                <div class="eio-block" draggable="true" data-block-type="search-hashtag">
                    <div class="eio-block-icon" style="background: rgba(33, 150, 243, 0.15);">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M9 2L11 2M5 8L7 8M13 8L15 8M9 14L11 14M7 2V18M13 2V18" stroke="#2196F3"
                                stroke-width="2" />
                        </svg>
                    </div>
                    <div class="eio-block-text">
                        <div class="eio-block-name">Buscar Hashtag</div>
                        <div class="eio-block-desc">Encontrar perfis por hashtag</div>
                    </div>
                </div>

                <div class="eio-block" draggable="true" data-block-type="search-followers">
                    <div class="eio-block-icon" style="background: rgba(33, 150, 243, 0.15);">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="10" cy="7" r="3" stroke="#2196F3" stroke-width="2" />
                            <path d="M5 15C5 12.79 7.24 11 10 11C12.76 11 15 12.79 15 15" stroke="#2196F3"
                                stroke-width="2" />
                        </svg>
                    </div>
                    <div class="eio-block-text">
                        <div class="eio-block-name">Buscar Seguidores</div>
                        <div class="eio-block-desc">Extrair seguidores de perfil</div>
                    </div>
                </div>

                <div class="eio-block" draggable="true" data-block-type="search-following">
                    <div class="eio-block-icon" style="background: rgba(33, 150, 243, 0.15);">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path
                                d="M12 5C12 6.66 10.66 8 9 8C7.34 8 6 6.66 6 5C6 3.34 7.34 2 9 2C10.66 2 12 3.34 12 5Z"
                                stroke="#2196F3" stroke-width="2" />
                            <path
                                d="M15 7C15.55 7 16 7.45 16 8C16 8.55 15.55 9 15 9C14.45 9 14 8.55 14 8C14 7.45 14.45 7 15 7Z"
                                stroke="#2196F3" stroke-width="2" />
                            <path d="M3 15C3 13 6 11 9 11C12 11 15 13 15 15V17H3V15Z" stroke="#2196F3"
                                stroke-width="2" />
                            <path d="M15 12C16.66 12 18 13.34 18 15V17" stroke="#2196F3" stroke-width="2" />
                        </svg>
                    </div>
                    <div class="eio-block-text">
                        <div class="eio-block-name">Buscar Seguindo</div>
                        <div class="eio-block-desc">Extrair lista de seguindo</div>
                    </div>
                </div>
            </div>

            <div class="eio-palette-section">
                <div class="eio-palette-title">Ações</div>
                <div class="eio-block" draggable="true" data-block-type="action-follow">
                    <div class="eio-block-icon" style="background: rgba(76, 175, 80, 0.15);">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 12V4M10 4L7 7M10 4L13 7" stroke="#4CAF50" stroke-width="2" />
                            <path d="M16 16H4V14C4 12.9 4.9 12 6 12H14C15.1 12 16 12.9 16 14V16Z" stroke="#4CAF50"
                                stroke-width="2" />
                        </svg>
                    </div>
                    <div class="eio-block-text">
                        <div class="eio-block-name">Seguir</div>
                        <div class="eio-block-desc">Seguir perfis</div>
                    </div>
                </div>

                <div class="eio-block" draggable="true" data-block-type="action-like">
                    <div class="eio-block-icon" style="background: rgba(76, 175, 80, 0.15);">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path
                                d="M14 4C11.79 4 10 5.79 10 8C10 5.79 8.21 4 6 4C3.79 4 2 5.79 2 8C2 12 10 18 10 18C10 18 18 12 18 8C18 5.79 16.21 4 14 4Z"
                                stroke="#4CAF50" stroke-width="2" />
                        </svg>
                    </div>
                    <div class="eio-block-text">
                        <div class="eio-block-name">Curtir Posts</div>
                        <div class="eio-block-desc">Curtir posts de perfis</div>
                    </div>
                </div>

                <div class="eio-block" draggable="true" data-block-type="action-comment">
                    <div class="eio-block-icon" style="background: rgba(76, 175, 80, 0.15);">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path
                                d="M18 10C18 14.42 14.42 18 10 18C9 18 8 17.8 7 17.4L3 18L4 14C3 12.5 2 10.8 2 10C2 5.58 5.58 2 10 2C14.42 2 18 5.58 18 10Z"
                                stroke="#4CAF50" stroke-width="2" />
                        </svg>
                    </div>
                    <div class="eio-block-text">
                        <div class="eio-block-name">Comentar</div>
                        <div class="eio-block-desc">Enviar comentários</div>
                    </div>
                </div>

                <div class="eio-block" draggable="true" data-block-type="action-unfollow">
                    <div class="eio-block-icon" style="background: rgba(244, 67, 54, 0.15);">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 12V4M10 12L7 9M10 12L13 9" stroke="#F44336" stroke-width="2" />
                            <path d="M16 16H4V14C4 12.9 4.9 12 6 12H14C15.1 12 16 12.9 16 14V16Z" stroke="#F44336"
                                stroke-width="2" />
                        </svg>
                    </div>
                    <div class="eio-block-text">
                        <div class="eio-block-name">Deixar de Seguir</div>
                        <div class="eio-block-desc">Unfollow perfis</div>
                    </div>
                </div>
                <div class="eio-block" draggable="true" data-block-type="action-ai-welcome">
                    <div class="eio-block-icon" style="background: rgba(98, 70, 234, 0.15);">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#6246ea" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg>
                    </div>
                    <div class="eio-block-text">
                        <div class="eio-block-name">Agente IA (DM)</div>
                        <div class="eio-block-desc">Enviar Boas-vindas IA</div>
                    </div>
                </div>
            </div>

            <div class="eio-palette-section">
                <div class="eio-palette-title">Controle</div>
                <div class="eio-block" draggable="true" data-block-type="control-delay">
                    <div class="eio-block-icon" style="background: rgba(255, 152, 0, 0.15);">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="10" cy="10" r="7" stroke="#FF9800" stroke-width="2" />
                            <path d="M10 5V10L13 13" stroke="#FF9800" stroke-width="2" />
                        </svg>
                    </div>
                    <div class="eio-block-text">
                        <div class="eio-block-name">Aguardar</div>
                        <div class="eio-block-desc">Delay configurável</div>
                    </div>
                </div>

                <div class="eio-block" draggable="true" data-block-type="control-filter">
                    <div class="eio-block-icon" style="background: rgba(255, 152, 0, 0.15);">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M3 5H17L11 12V17L9 18V12L3 5Z" stroke="#FF9800" stroke-width="2" />
                        </svg>
                    </div>
                    <div class="eio-block-text">
                        <div class="eio-block-name">Filtrar Perfis</div>
                        <div class="eio-block-desc">Aplicar filtros avançados</div>
                    </div>
                </div>

                <div class="eio-block" draggable="true" data-block-type="control-repeat">
                    <div class="eio-block-icon" style="background: rgba(255, 152, 0, 0.15);">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path
                                d="M17 10C17 13.87 13.87 17 10 17C6.13 17 3 13.87 3 10C3 6.13 6.13 3 10 3C11.93 3 13.68 3.79 15 5.05M17 3V7H13"
                                stroke="#FF9800" stroke-width="2" />
                        </svg>
                    </div>
                    <div class="eio-block-text">
                        <div class="eio-block-name">Repetir</div>
                        <div class="eio-block-desc">Loop de ações</div>
                    </div>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="eio-main-content">
        <!-- Topbar -->
        <header class="eio-topbar">
            <div class="eio-topbar-left">
                <a href="dashboard.html" class="eio-btn eio-btn-ghost eio-btn-sm">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="2" />
                    </svg>
                    Voltar
                </a>
                <input type="text" id="flowName" class="eio-input" value="Novo Fluxo"
                    style="max-width: 300px; margin-left: var(--spacing-lg);">
            </div>

            <div class="eio-topbar-right">
                <button class="eio-btn eio-btn-ghost" id="btnClear">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path
                            d="M2 4H14M12.667 4V13.333C12.667 14 12 14.667 11.333 14.667H4.667C4 14.667 3.333 14 3.333 13.333V4"
                            stroke="currentColor" stroke-width="2" />
                    </svg>
                    Limpar
                </button>
                <button class="eio-btn eio-btn-outline" id="btnSaveDraft">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path
                            d="M12.667 14H3.333C2.597 14 2 13.403 2 12.667V3.333C2 2.597 2.597 2 3.333 2H9.333L14 6.667V12.667C14 13.403 13.403 14 12.667 14Z"
                            stroke="currentColor" stroke-width="2" />
                        <path d="M5 2V6H11V2" stroke="currentColor" stroke-width="2" />
                    </svg>
                    Salvar Rascunho
                </button>
                <button class="eio-btn eio-btn-primary" id="btnSaveActivate">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="2" />
                        <path d="M6 8L7.5 9.5L10 6.5" stroke="currentColor" stroke-width="2" />
                    </svg>
                    Salvar e Ativar
                </button>
            </div>
        </header>

        <!-- Canvas Area -->
        <div class="eio-flow-canvas" id="flowCanvas">
            <div class="eio-canvas-grid"></div>
            <div class="eio-canvas-content" id="canvasContent">
                <!-- Start node -->
                <div class="eio-flow-node eio-node-start" style="top: 50px; left: 50%;">
                    <div class="eio-node-header">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="10" cy="10" r="7" fill="currentColor" />
                        </svg>
                        <span>Início</span>
                    </div>
                    <div class="eio-node-port eio-port-output"></div>
                </div>

                <!-- Empty state -->
                <div class="eio-canvas-empty">
                    <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                        <circle cx="32" cy="32" r="30" stroke="currentColor" stroke-width="2" opacity="0.2" />
                        <path d="M32 20V44M20 32H44" stroke="currentColor" stroke-width="2" opacity="0.3" />
                    </svg>
                    <h3>Arraste blocos aqui para criar seu fluxo</h3>
                    <p>Selecione blocos da paleta à esquerda e arraste para esta área</p>
                </div>
            </div>
        </div>

        <!-- Properties Panel -->
        <div class="eio-properties-panel" id="propertiesPanel">
            <div class="eio-properties-header">
                <h4>Propriedades do Bloco</h4>
                <button class="eio-properties-close" id="closeProperties">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2" />
                    </svg>
                </button>
            </div>
            <div class="eio-properties-body" id="propertiesBody">
                <p class="eio-properties-empty">Selecione um bloco para editar suas propriedades</p>
            </div>
        </div>
    </main>

    <script src="flow-builder.js"></script>
</body>

</html>